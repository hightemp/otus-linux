
## Домашнее задание к уроку 17

    Домашнее задание 17
    разворачиваем сетевую лабораторию

    # otus-linux
    Vagrantfile - для стенда урока 9 - Network

    # Дано
    https://github.com/erlong15/otus-linux/tree/network
    (ветка network)

    Vagrantfile с начальным построением сети
    - inetRouter
    - centralRouter
    - centralServer

    тестировалось на virtualbox

    # Планируемая архитектура
    построить следующую архитектуру

    Сеть office1
    - 192.168.2.0/26 - dev
    - 192.168.2.64/26 - test servers
    - 192.168.2.128/26 - managers
    - 192.168.2.192/26 - office hardware

    Сеть office2
    - 192.168.1.0/25 - dev
    - 192.168.1.128/26 - test servers
    - 192.168.1.192/26 - office hardware


    Сеть central
    - 192.168.0.0/28 - directors
    - 192.168.0.32/28 - office hardware
    - 192.168.0.64/26 - wifi

    ```
    Office1 ---\
    -----> Central --IRouter --> internet
    Office2----/
    ```
    Итого должны получится следующие сервера
    - inetRouter
    - centralRouter
    - office1Router
    - office2Router
    - centralServer
    - office1Server
    - office2Server

    # Теоретическая часть
    - Найти свободные подсети
    - Посчитать сколько узлов в каждой подсети, включая свободные
    - Указать broadcast адрес для каждой подсети
    - проверить нет ли ошибок при разбиении

    # Практическая часть
    - Соединить офисы в сеть согласно схеме и настроить роутинг
    - Все сервера и роутеры должны ходить в инет черз inetRouter
    - Все сервера должны видеть друг друга
    - у всех новых серверов отключить дефолт на нат (eth0), который вагрант поднимает для связи
    - при нехватке сетевых интервейсов добавить по несколько адресов на интерфейс

```console
$ vagrant up
```

### Диаграмма

![](/images/diagram.png)

### Расчет сети

* Сеть office1
    - 192.168.2.0/26 - dev
        * hosts range: **192.168.2.1-192.168.2.62**
        * hosts count: **62**
        * broadcast: **192.168.2.63**
    - 192.168.2.64/26 - test servers
        * hosts range: **192.168.2.66-192.168.2.126**
        * hosts count: **62**
        * broadcast: **192.168.2.127**
    - 192.168.2.128/26 - managers
        * hosts range: **192.168.2.129-192.168.2.190**
        * hosts count: **62**
        * broadcast: **192.168.2.191**
    - 192.168.2.192/26 - office hardware
        * hosts range: **192.168.2.193-192.168.2.254**
        * hosts count: **62**
        * broadcast: **192.168.2.254**

* Сеть office2
    - 192.168.1.0/25 - dev
        * hosts range: **192.168.1.1-192.168.1.126**
        * hosts count: **126**
        * broadcast: **192.168.1.127**
    - 192.168.1.128/26 - test servers
        * hosts range: **192.168.1.129-192.168.1.190**
        * hosts count: **62**
        * broadcast: **192.168.1.191**
    - 192.168.1.192/26 - office hardware
        * hosts range: **192.168.1.193-192.168.1.254**
        * hosts count: **62**
        * broadcast: **192.168.1.255**

* Сеть central
    - 192.168.0.0/28 - directors
        * hosts range: **192.168.0.1-192.168.0.14**
        * hosts count: **14**
        * broadcast: **192.168.0.15**
    - 192.168.0.32/28 - office hardware
        * hosts range: **192.168.0.33-192.168.0.46**
        * hosts count: **14**
        * broadcast: **192.168.0.47**
    - 192.168.0.64/26 - wifi
        * hosts range: **192.168.0.65-192.168.0.126**
        * hosts count: **62**
        * broadcast: **192.168.0.127**

* Сеть router-net
    - 192.168.255.0/30
        * hosts range: **192.168.255.1-192.168.255.2**
        * hosts count: **2**
        * broadcast: **192.168.0.3**

* Сеть central-net
    - 192.168.255.8/29
        * hosts range: **192.168.255.9-192.168.255.14**
        * hosts count: **6**
        * broadcast: **192.168.255.15**

### Свободные подсети

* Сеть **192.168.0.0/24**

**Десятичный**|**Двоичный**| 
:-----:|:-----:|:-----:
IP-адрес:|192.168.0.0|11000000.10101000.00000000.   00000000
Маска подсети:|255.255.255.0 = 24|11111111.11111111.11111111.   00000000
Wildcard:|0.0.0.255|00000000.00000000.00000000.   11111111
Адрес сети:|192.168.0.0|11000000.10101000.00000000.   00000000 Класс C
Broadcast:|192.168.0.255|11000000.10101000.00000000.   11111111
Первый хост:|192.168.0.1|11000000.10101000.00000000.   00000001
Последний хост:|192.168.0.254|11000000.10101000.00000000.   11111110
Хостов/Сетей:|254|Приватное адресное пространство (см. RFC-1918)

    * 192.168.0.16/28
    * 192.168.0.48/28
    * 192.168.0.128/25
* Сеть **192.168.255.0/24**
    * 192.168.255.4/30
    * 192.168.255.16/28
    * 192.168.255.32/27
    * 192.168.255.64/26
    * 192.168.255.128/25**